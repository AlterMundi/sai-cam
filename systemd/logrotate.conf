# SAI-CAM Log Rotation Configuration
#
# Note: Python's RotatingFileHandler handles primary log rotation at 10MB.
# This logrotate config serves as a backup/cleanup mechanism for:
# 1. Compressing old rotated logs (.1, .2, etc. created by Python)
# 2. Removing logs older than retention period
# 3. Handling any other log files in the directory

/var/log/sai-cam/*.log {
    daily
    rotate 14
    compress
    delaycompress
    missingok
    notifempty
    create 644 admin admin
    # Don't rotate based on size - Python handles that
    # Just compress and clean up old files daily
}

# Also handle Python's rotated files (.log.1, .log.2, etc.)
/var/log/sai-cam/*.log.[0-9] {
    daily
    rotate 7
    compress
    missingok
    notifempty
}

# Self-update logs (written by systemd journal, but also caught if redirected)
/var/log/sai-cam/self-update.log {
    weekly
    rotate 8
    compress
    delaycompress
    notifempty
    missingok
}

# Rotate camera storage logs (if any)
/opt/sai-cam/storage/logs/*.log {
    weekly
    rotate 4
    compress
    delaycompress
    missingok
    notifempty
    create 644 admin admin
}
