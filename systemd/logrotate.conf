# SAI-CAM Log Rotation Configuration
#
# Note: Python's RotatingFileHandler handles primary log rotation at 10MB.
# This logrotate config serves as a backup/cleanup mechanism for:
# 1. Compressing old rotated logs (.1, .2, etc. created by Python)
# 2. Removing logs older than retention period
# 3. Handling any other log files in the directory

/var/log/sai-cam/camera_service.log {
    daily
    rotate 14
    compress
    delaycompress
    missingok
    notifempty
    create 664 admin sai-cam
    # Don't rotate based on size - Python handles that
    # Just compress and clean up old files daily
}

# Also handle Python's rotated files (.log.1, .log.2, etc.)
/var/log/sai-cam/camera_service.log.[0-9] {
    daily
    rotate 7
    compress
    missingok
    notifempty
}

# Self-update logs (written by root via self-update.sh, read by portal)
/var/log/sai-cam/update.log {
    weekly
    rotate 8
    compress
    delaycompress
    notifempty
    missingok
    create 664 root sai-cam
}

# Rotate camera storage logs (if any)
/opt/sai-cam/storage/logs/*.log {
    weekly
    rotate 4
    compress
    delaycompress
    missingok
    notifempty
    create 664 admin sai-cam
}
